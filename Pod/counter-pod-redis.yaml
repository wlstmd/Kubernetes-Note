apiVersion: v1
kind: Pod
metadata:
  name: counter
  labels:
    app: counter
spec:
  containers:
  - name: app
    image: ghcr.io/subicura/counter:latest
    env:
    - name: REDIS_HOST
      value: "localhost"
  - name: db
    image: redis

#  다중 컨테이너
# 대부분 1 Pod = 1 컨테이너지만 여러 개의 컨테이너를 가진 경우도 꽤 흔합니다.
# 하나의 Pod에 속한 컨테이너는 서로 네트워크를 localhost로 공유하고 동일한 디렉토리를 공유할 수 있습니다.

# 멀티 컨테이너는 도커에선 볼 수 없던 개념입니다. 
# 쿠버네티스는 멀티 컨테이너를 이용한 다양한 패턴이 존재합니다. 
# 로그를 수집하는 별도의 컨테이너를 같은 Pod으로 배포한다던가, 
# 서버가 실행되기 전 데이터베이스를 마이그레이션 하는 초기화 컨테이너를 만들 수도 있습니다
